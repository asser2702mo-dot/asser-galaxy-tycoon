<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ASSER GALAXY - ULTIMATE V18</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Arial', sans-serif; color: white; touch-action: none; user-select: none; }
        #game-container { position: relative; width: 100vw; height: 100vh; background: radial-gradient(circle, #000428, #000000); overflow: hidden; }
        
        /* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… */
        .menu { position: absolute; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .btn { padding: 15px 30px; font-size: 20px; background: #00f2ff; color: #000; border: none; border-radius: 10px; cursor: pointer; margin: 10px; font-weight: bold; }
        
        /* Ø§Ù„Ø³ÙÙŠÙ†Ø© ÙˆØ§Ù„Ù„Ø¹Ø¨ */
        #player { position: absolute; bottom: 150px; font-size: 60px; left: 50%; transform: translateX(-50%); z-index: 500; transition: left 0.1s ease-out; }
        .bullet { position: absolute; width: 6px; height: 20px; background: #ffea00; border-radius: 3px; box-shadow: 0 0 10px #ffea00; z-index: 400; }
        .enemy { position: absolute; font-size: 45px; z-index: 300; }
        .boss { position: absolute; font-size: 100px; z-index: 350; text-align: center; left: 50%; transform: translateX(-50%); }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¶Ø®Ù…Ø© */
        #controls { position: absolute; bottom: 30px; width: 100%; display: flex; justify-content: space-around; z-index: 2000; pointer-events: none; }
        .ctrl-btn { width: 100px; height: 100px; background: rgba(255,255,255,0.2); border: 3px solid #00f2ff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; pointer-events: auto; }
        
        /* Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© */
        #ui { position: absolute; top: 10px; width: 100%; display: flex; justify-content: space-between; padding: 0 20px; box-sizing: border-box; font-size: 20px; font-weight: bold; color: #00f2ff; z-index: 1000; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="ui" style="display:none;">
        <div>â¤ï¸ <span id="lives">3</span></div>
        <div>ğŸ’° <span id="coins">0</span></div>
        <div>STAGE <span id="stage">1</span></div>
    </div>

    <div id="start-menu" class="menu">
        <h1 style="color:#00f2ff; text-shadow: 0 0 20px #00f2ff;">ASSER GALAXY V18</h1>
        <div id="ship-preview" style="font-size: 80px; margin: 20px;">ğŸ›¸</div>
        <button class="btn" onclick="startGame()">START GAME</button>
        <p>Control with Left/Right Buttons Below</p>
    </div>

    <div id="player" style="display:none;">ğŸ›¸</div>

    <div id="controls" style="display:none;">
        <div class="ctrl-btn" id="leftBtn">â¬…ï¸</div>
        <div class="ctrl-btn" id="rightBtn">â¡ï¸</div>
    </div>
</div>

<script>
    let coins = 0, stage = 1, lives = 3, gameActive = false, playerX = 50;
    const player = document.getElementById('player');

    function startGame() {
        document.getElementById('start-menu').style.display = 'none';
        document.getElementById('ui').style.display = 'flex';
        document.getElementById('controls').style.display = 'flex';
        player.style.display = 'block';
        gameActive = true;
        spawnEnemy();
        autoShoot();
    }

    // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£Ø²Ø±Ø§Ø±
    let moveLeft = false, moveRight = false;
    document.getElementById('leftBtn').addEventListener('touchstart', (e) => { e.preventDefault(); moveLeft = true; });
    document.getElementById('leftBtn').addEventListener('touchend', () => moveLeft = false);
    document.getElementById('rightBtn').addEventListener('touchstart', (e) => { e.preventDefault(); moveRight = true; });
    document.getElementById('rightBtn').addEventListener('touchend', () => moveRight = false);

    setInterval(() => {
        if(!gameActive) return;
        if(moveLeft && playerX > 10) playerX -= 4;
        if(moveRight && playerX < 90) playerX += 4;
        player.style.left = playerX + '%';
    }, 20);

    // Ø§Ù„Ø¶Ø±Ø¨ Ø§Ù„Ø¢Ù„ÙŠ
    function autoShoot() {
        if(!gameActive) return;
        const b = document.createElement('div');
        b.className = 'bullet';
        const rect = player.getBoundingClientRect();
        b.style.left = (rect.left + rect.width/2 - 3) + 'px';
        b.style.bottom = (window.innerHeight - rect.top) + 'px';
        document.getElementById('game-container').appendChild(b);

        let moveB = setInterval(() => {
            let bBottom = parseFloat(b.style.bottom);
            b.style.bottom = (bBottom + 10) + 'px';
            
            document.querySelectorAll('.enemy').forEach(en => {
                let eR = en.getBoundingClientRect();
                let bR = b.getBoundingClientRect();
                if(bR.left < eR.right && bR.right > eR.left && bR.top < eR.bottom && bR.bottom > eR.top) {
                    en.remove(); b.remove(); clearInterval(moveB);
                    coins += 10; document.getElementById('coins').innerText = coins;
                }
            });

            if(bBottom > window.innerHeight) { b.remove(); clearInterval(moveB); }
        }, 20);
        setTimeout(autoShoot, 400);
    }

    function spawnEnemy() {
        if(!gameActive) return;
        const en = document.createElement('div');
        en.className = 'enemy'; en.innerText = 'ğŸ‘¾';
        en.style.left = Math.random() * 80 + 'vw';
        en.style.top = '-50px';
        document.getElementById('game-container').appendChild(en);

        let speed = 3 + (stage * 0.5);
        let moveEn = setInterval(() => {
            if(!gameActive) { en.remove(); clearInterval(moveEn); return; }
            let enTop = parseFloat(en.style.top);
            en.style.top = (enTop + speed) + 'px';

            // ØªØµØ§Ø¯Ù… Ù…Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨
            let pR = player.getBoundingClientRect();
            let eR = en.getBoundingClientRect();
            if(eR.left < pR.right && eR.right > pR.left && eR.top < pR.bottom && eR.bottom > pR.top) {
                lives--; document.getElementById('lives').innerText = lives;
                en.remove(); clearInterval(moveEn);
                if(lives <= 0) { alert("GAME OVER!"); location.reload(); }
            }

            if(enTop > window.innerHeight) { en.remove(); clearInterval(moveEn); spawnEnemy(); }
        }, 20);
        setTimeout(spawnEnemy, 2000);
    }
</script>
</body>
</html>
