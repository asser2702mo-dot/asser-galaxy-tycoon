<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ASSER GALAXY V30 - THE FACE OF EVIL</title>
    <style>
        :root { --blue: #00f2ff; --gold: #ffd700; --red: #ff0044; --purple: #bc13fe; }
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Arial Black', sans-serif; color: white; touch-action: none; user-select: none; }
        
        .screen { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle, #001233 0%, #000 100%); z-index: 1000; }
        .garage { display: flex; gap: 15px; margin: 20px 0; }
        .ship-box { border: 2px solid #333; padding: 10px; border-radius: 15px; width: 85px; text-align: center; background: rgba(0,0,0,0.6); }
        .ship-box.active { border-color: var(--blue); box-shadow: 0 0 20px var(--blue); transform: scale(1.1); }
        .svg-icon { width: 50px; height: 50px; }

        .btn { padding: 15px 35px; background: var(--blue); border: none; border-radius: 50px; font-weight: bold; color: #000; cursor: pointer; font-size: 18px; box-shadow: 0 5px 15px rgba(0,242,255,0.4); }

        #ui { position: absolute; top: 20px; width: 100%; display: none; justify-content: space-around; z-index: 500; font-size: 20px; }
        #player { position: absolute; bottom: 130px; width: 70px; height: 70px; z-index: 200; filter: drop-shadow(0 0 10px var(--blue)); }
        
        .bullet { position: absolute; width: 6px; height: 30px; background: #fff; box-shadow: 0 0 10px var(--blue); border-radius: 5px; }
        
        /* ÿßŸÑÿ£ÿπÿØÿßÿ° ÿßŸÑÿ¨ÿØÿØ ÿ®ŸÖŸÑÿßŸÖÿ≠ */
        .enemy { position: absolute; width: 85px; height: 85px; z-index: 100; }
        .e-face { position: relative; width: 100%; height: 100%; }
        
        .boss { position: absolute; width: 230px; height: 160px; z-index: 110; text-align: center; display: flex; flex-direction: column; align-items: center; }
        .hp-bar { width: 90%; height: 12px; background: #333; border: 2px solid #fff; border-radius: 6px; overflow: hidden; margin-bottom: 5px; }
        .hp-fill { height: 100%; background: var(--red); width: 100%; transition: width 0.2s; }
        .boss-icon { font-size: 80px; filter: drop-shadow(0 0 20px var(--purple)); }

        #controls { position: absolute; bottom: 30px; width: 100%; display: none; justify-content: center; gap: 60px; z-index: 2000; }
        .ctrl-btn { width: 90px; height: 90px; background: rgba(255,255,255,0.1); border: 3px solid var(--blue); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; }
    </style>
</head>
<body>

<div id="lobby" class="screen">
    <h1 style="color: var(--blue); font-size: 38px;">ASSER GALAXY</h1>
    <div style="color: var(--gold); margin-bottom: 20px;">üí∞ COINS: <span id="c-val">0</span> | STAGE: <span id="s-val">1</span></div>
    
    <div class="garage" id="garage"></div>

    <button class="btn" onclick="upgrade()">UPGRADE (500 üí∞)</button>
    <button class="btn" style="background: var(--gold); margin-top: 15px;" onclick="start()">BATTLE START</button>
</div>

<div id="ui">
    <div id="lives-ui"></div>
    <div style="color: var(--gold);">üí∞ <span id="g-c">0</span></div>
    <div style="color: var(--blue);">STAGE <span id="g-s">1</span></div>
</div>

<div id="player" style="display:none;"></div>
<div id="controls">
    <div class="ctrl-btn" id="lBtn">‚¨ÖÔ∏è</div>
    <div class="ctrl-btn" id="rBtn">‚û°Ô∏è</div>
</div>

<script>
    const ships = [
        `<svg class="svg-icon" viewBox="0 0 100 100"><polygon points="50,5 95,95 50,75 5,95" fill="#00f2ff"/><rect x="45" y="40" width="10" height="30" fill="#fff"/></svg>`,
        `<svg class="svg-icon" viewBox="0 0 100 100"><path d="M50 5 L100 80 L80 100 L50 80 L20 100 L0 80 Z" fill="#ffd700"/><circle cx="50" cy="50" r="10" fill="#fff"/></svg>`,
        `<svg class="svg-icon" viewBox="0 0 100 100"><path d="M10 20 L50 0 L90 20 L90 80 L50 100 L10 80 Z" fill="#fff"/><path d="M30 40 L70 40 L50 70 Z" fill="#00f2ff"/></svg>`
    ];

    let state = {
        coins: parseInt(localStorage.getItem('as_c')) || 0,
        stage: parseInt(localStorage.getItem('as_s')) || 1,
        shipId: 0,
        lvls: JSON.parse(localStorage.getItem('as_l')) || [1, 1, 1]
    };

    let active = false, lives = 3, kills = 0, isBoss = false, px = 50, bx = 50, bd = 1;

    function save() {
        localStorage.setItem('as_c', state.coins);
        localStorage.setItem('as_s', state.stage);
        localStorage.setItem('as_l', JSON.stringify(state.lvls));
        document.getElementById('c-val').innerText = state.coins;
        document.getElementById('s-val').innerText = state.stage;
        renderGarage();
    }

    function renderGarage() {
        const g = document.getElementById('garage');
        g.innerHTML = ships.map((s, i) => `
            <div class="ship-box ${state.shipId==i?'active':''}" onclick="state.shipId=${i};save();">
                ${s}
                <div>Lv ${state.lvls[i]}</div>
            </div>
        `).join('');
    }

    function upgrade() {
        if(state.coins >= 500) { state.coins -= 500; state.lvls[state.shipId]++; save(); }
    }

    function start() {
        document.getElementById('lobby').style.display = 'none';
        document.getElementById('ui').style.display = 'flex';
        document.getElementById('controls').style.display = 'flex';
        const p = document.getElementById('player');
        p.style.display = 'block'; p.innerHTML = ships[state.shipId];
        active = true; lives = 4 + state.lvls[state.shipId];
        kills = 0; isBoss = false; px = 50;
        updateUI(); spawnEnemy(); shoot();
    }

    function updateUI() {
        document.getElementById('lives-ui').innerText = "‚ù§Ô∏è".repeat(Math.max(0, lives));
        document.getElementById('g-c').innerText = state.coins;
        document.getElementById('g-s').innerText = state.stage;
    }

    function shoot() {
        if(!active) return;
        const b = document.createElement('div'); b.className = 'bullet';
        const r = document.getElementById('player').getBoundingClientRect();
        b.style.left = (r.left + r.width/2 - 3) + 'px';
        b.style.bottom = (window.innerHeight - r.top) + 'px';
        document.body.appendChild(b);

        let m = setInterval(() => {
            let y = parseFloat(b.style.bottom); b.style.bottom = (y + 20) + 'px';
            let bR = b.getBoundingClientRect();
            document.querySelectorAll('.enemy, .boss').forEach(t => {
                let tR = t.getBoundingClientRect();
                if(bR.left < tR.right && bR.right > tR.left && bR.top < tR.bottom && bR.bottom > tR.top) {
                    if(t.classList.contains('boss')) {
                        t.hp -= (state.lvls[state.shipId] * 3); // ÿ∂ÿ±ÿ®ÿ© ÿ£ŸÇŸàŸâ 3 ŸÖÿ±ÿßÿ™
                        t.querySelector('.hp-fill').style.width = (t.hp/t.max*100)+'%';
                        if(t.hp <= 0) { t.remove(); state.coins += 1200; state.stage++; location.reload(); }
                    } else {
                        t.remove(); state.coins += 25; kills++; updateUI();
                        if(kills === 10) spawnBoss();
                    }
                    b.remove(); clearInterval(m);
                }
            });
            if(y > window.innerHeight) { b.remove(); clearInterval(m); }
        }, 20);
        setTimeout(shoot, Math.max(80, 400 - (state.lvls[state.shipId]*60)));
    }

    function spawnEnemy() {
        if(!active || isBoss) return;
        const e = document.createElement('div'); e.className = 'enemy';
        // ÿπÿØŸà ÿ®ŸÄ ÿπŸäŸÜŸäŸÜ Ÿàÿ®ŸàŸÇ
        e.innerHTML = `
            <div class="e-face">
                <svg viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" fill="#ff0044" stroke="#fff" stroke-width="3"/>
                    <circle cx="35" cy="40" r="8" fill="#fff"/> <circle cx="35" cy="40" r="3" fill="#000"/>
                    <circle cx="65" cy="40" r="8" fill="#fff"/> <circle cx="65" cy="40" r="3" fill="#000"/>
                    <path d="M30 70 Q50 90 70 70" fill="none" stroke="#fff" stroke-width="4"/>
                </svg>
            </div>`;
        e.style.left = Math.random() * 80 + 'vw'; e.style.top = '-100px';
        document.body.appendChild(e);

        let m = setInterval(() => {
            if(!active) { e.remove(); clearInterval(m); return; }
            let t = parseFloat(e.style.top); e.style.top = (t + 4 + (state.stage * 0.3)) + 'px';
            let pR = document.getElementById('player').getBoundingClientRect();
            let eR = e.getBoundingClientRect();
            if(eR.left < pR.right && eR.right > pR.left && eR.top < pR.bottom && eR.bottom > pR.top) {
                lives--; updateUI(); e.remove(); clearInterval(m); if(lives <= 0) location.reload();
            }
            if(t > window.innerHeight) { e.remove(); clearInterval(m); spawnEnemy(); }
        }, 20);
        setTimeout(spawnEnemy, 1800 - (state.stage * 100));
    }

    function spawnBoss() {
        isBoss = true;
        const b = document.createElement('div'); b.className = 'boss';
        b.hp = 80 + (state.stage * 30); b.max = b.hp; // ÿµÿ≠ÿ© ÿ£ŸÇŸÑ ÿ®ŸÉÿ™Ÿäÿ±
        b.innerHTML = `
            <div class="hp-bar"><div class="hp-fill"></div></div>
            <div class="boss-icon">üíÄ</div>
            <div style="font-size:12px; color:var(--purple); font-weight:bold;">DEMON BOSS</div>
        `;
        b.style.top = '80px'; b.style.left = '50%'; b.style.transform = 'translateX(-50%)';
        document.body.appendChild(b);

        setInterval(() => {
            if(!active) return;
            bx += 3 * bd; if(bx > 80 || bx < 20) bd *= -1;
            b.style.left = bx + '%';
            if(Math.random() > 0.96) bossShoot(bx);
        }, 50);
    }

    function bossShoot(x) {
        const bomb = document.createElement('div');
        bomb.style.cssText = "position:absolute; width:20px; height:20px; background:#fff; border-radius:50%; box-shadow:0 0 15px var(--red);";
        bomb.style.left = x + 'vw'; bomb.style.top = '170px';
        document.body.appendChild(bomb);
        let m = setInterval(() => {
            let t = parseFloat(bomb.style.top); bomb.style.top = (t + 8) + 'px';
            let pR = document.getElementById('player').getBoundingClientRect();
            let bR = bomb.getBoundingClientRect();
            if(bR.left < pR.right && bR.right > pR.left && bR.top < pR.bottom && bR.bottom > pR.top) {
                lives--; updateUI(); bomb.remove(); clearInterval(m); if(lives <= 0) location.reload();
            }
            if(t > window.innerHeight) { bomb.remove(); clearInterval(m); }
        }, 20);
    }

    let mL = false, mR = false;
    document.getElementById('lBtn').ontouchstart = (e) => { e.preventDefault(); mL = true; };
    document.getElementById('lBtn').ontouchend = () => mL = false;
    document.getElementById('rBtn').ontouchstart = (e) => { e.preventDefault(); mR = true; };
    document.getElementById('rBtn').ontouchend = () => mR = false;
    
    setInterval(() => {
        if(!active) return;
        if(mL && px > 10) px -= 6; if(mR && px < 90) px += 6;
        document.getElementById('player').style.left = px + '%';
    }, 20);

    save();
</script>
</body>
</html>
